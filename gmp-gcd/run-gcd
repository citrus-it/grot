#!/bin/bash

trap 'rm /tmp/p ; kill $(jobs -p) 2>/dev/null' EXIT

>/tmp/p
for seq in $(seq 1 $1); do
	(./gcd 1 >>/tmp/p) &
done

wait

awk '{s+=$1} END {print s}' /tmp/p
